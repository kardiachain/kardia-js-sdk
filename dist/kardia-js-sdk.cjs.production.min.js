"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@open-rpc/client-js"),r=require("ethereumjs-util"),n=t(require("ethereumjs-wallet")),a=require("ethers"),i=t(require("elliptic")),o=require("js-sha3"),s=t(require("bn.js")),u=t(require("utf8")),c=t(require("number-to-bn")),f=require("lodash"),p=t(require("web3")),l=t(require("ethereumjs-abi")),h=require("bignumber.js");function d(t,e,r,n,a,i,o){try{var s=t[i](o),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,a)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){d(i,n,a,o,s,"next",t)}function s(t){d(i,n,a,o,s,"throw",t)}o(void 0)}))}}function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var y,g=(function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=Object.create((e&&e.prototype instanceof p?e:p).prototype),i=new C(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,i),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function p(){}function l(){}function h(){}var d={};d[a]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==e&&r.call(m,a)&&(d=m);var y=h.prototype=p.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var n;this._invoke=function(a,i){function o(){return new e((function(n,o){!function n(a,i,o,s){var u=c(t[a],t,i);if("throw"!==u.type){var f=u.arg,p=f.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(p).then((function(t){f.value=t,o(f)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return l.prototype=y.constructor=h,h.constructor=l,l.displayName=s(h,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(w.prototype),w.prototype[i]=function(){return this},t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(u(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(y),s(y,o,"Generator"),y[a]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(y={exports:{}}),y.exports),w="0123456789abcdef".split(""),x=[1,256,65536,16777216],b=[0,8,16,24],k=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=function(t){var e,r,n,a,i,o,s,u,c,f,p,l,h,d,v,m,y,g,w,x,b,C,_,T,E,B,S,A,I,P,N,L,q,F,O,j,G,M,W,K,R,D,H,U,$,J,V,X,Y,z,Q,Z,tt,et,rt,nt,at,it,ot,st,ut,ct,ft;for(n=0;n<48;n+=2)a=t[0]^t[10]^t[20]^t[30]^t[40],i=t[1]^t[11]^t[21]^t[31]^t[41],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],p=t[7]^t[17]^t[27]^t[37]^t[47],r=(h=t[9]^t[19]^t[29]^t[39]^t[49])^((s=t[3]^t[13]^t[23]^t[33]^t[43])<<1|(o=t[2]^t[12]^t[22]^t[32]^t[42])>>>31),t[0]^=e=(l=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|s>>>31),t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,r=i^(c<<1|u>>>31),t[2]^=e=a^(u<<1|c>>>31),t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,r=s^(p<<1|f>>>31),t[4]^=e=o^(f<<1|p>>>31),t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,r=c^(h<<1|l>>>31),t[6]^=e=u^(l<<1|h>>>31),t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,r=p^(i<<1|a>>>31),t[8]^=e=f^(a<<1|i>>>31),t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,v=t[1],J=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,A=t[20]<<3|t[21]>>>29,I=t[21]<<3|t[20]>>>29,st=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,D=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,F=t[2]<<1|t[3]>>>31,O=t[3]<<1|t[2]>>>31,y=t[12]<<12|t[13]>>>20,X=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,P=t[33]<<13|t[32]>>>19,N=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ft=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,j=t[14]<<6|t[15]>>>26,G=t[15]<<6|t[14]>>>26,w=t[24]<<11|t[25]>>>21,z=t[34]<<15|t[35]>>>17,Q=t[35]<<15|t[34]>>>17,L=t[45]<<29|t[44]>>>3,q=t[44]<<29|t[45]>>>3,T=t[6]<<28|t[7]>>>4,E=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,at=t[16]<<23|t[17]>>>9,M=t[26]<<25|t[27]>>>7,W=t[27]<<25|t[26]>>>7,x=t[36]<<21|t[37]>>>11,b=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,U=t[8]<<27|t[9]>>>5,$=t[9]<<27|t[8]>>>5,B=t[18]<<20|t[19]>>>12,S=t[19]<<20|t[18]>>>12,it=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,K=t[38]<<8|t[39]>>>24,R=t[39]<<8|t[38]>>>24,C=t[48]<<14|t[49]>>>18,_=t[49]<<14|t[48]>>>18,t[0]=(d=t[0])^~(m=t[13]<<12|t[12]>>>20)&(g=t[25]<<11|t[24]>>>21),t[1]=v^~y&w,t[10]=T^~B&A,t[11]=E^~S&I,t[20]=F^~j&M,t[21]=O^~G&W,t[30]=U^~J&X,t[31]=$^~V&Y,t[40]=et^~nt&it,t[41]=rt^~at&ot,t[2]=m^~g&x,t[3]=y^~w&b,t[12]=B^~A&P,t[13]=S^~I&N,t[22]=j^~M&K,t[23]=G^~W&R,t[32]=J^~X&z,t[33]=V^~Y&Q,t[42]=nt^~it&st,t[43]=at^~ot&ut,t[4]=g^~x&C,t[5]=w^~b&_,t[14]=A^~P&L,t[15]=I^~N&q,t[24]=M^~K&D,t[25]=W^~R&H,t[34]=X^~z&Z,t[35]=Y^~Q&tt,t[44]=it^~st&ct,t[45]=ot^~ut&ft,t[6]=x^~C&d,t[7]=b^~_&v,t[16]=P^~L&T,t[17]=N^~q&E,t[26]=K^~D&F,t[27]=R^~H&O,t[36]=z^~Z&U,t[37]=Q^~tt&$,t[46]=st^~ct&et,t[47]=ut^~ft&rt,t[8]=C^~d&m,t[9]=_^~v&y,t[18]=L^~T&B,t[19]=q^~E&S,t[28]=D^~F&j,t[29]=H^~O&G,t[38]=Z^~U&J,t[39]=tt^~$&V,t[48]=ct^~et&nt,t[49]=ft^~rt&at,t[0]^=k[n],t[1]^=k[n+1]},_=function(t){return function(e){var r;if("0x"===e.slice(0,2)){r=[];for(var n=2,a=e.length;n<a;n+=2)r.push(parseInt(e.slice(n,n+2),16))}else r=e;return function(t,e){for(var r,n,a=e.length,i=t.blocks,o=t.blockCount<<2,s=t.blockCount,u=t.outputBlocks,c=t.s,f=0;f<a;){if(t.reset)for(t.reset=!1,i[0]=t.block,r=1;r<s+1;++r)i[r]=0;if("string"!=typeof e)for(r=t.start;f<a&&r<o;++f)i[r>>2]|=e[f]<<b[3&r++];else for(r=t.start;f<a&&r<o;++f)(n=e.charCodeAt(f))<128?i[r>>2]|=n<<b[3&r++]:n<2048?(i[r>>2]|=(192|n>>6)<<b[3&r++],i[r>>2]|=(128|63&n)<<b[3&r++]):n<55296||n>=57344?(i[r>>2]|=(224|n>>12)<<b[3&r++],i[r>>2]|=(128|n>>6&63)<<b[3&r++],i[r>>2]|=(128|63&n)<<b[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++f)),i[r>>2]|=(240|n>>18)<<b[3&r++],i[r>>2]|=(128|n>>12&63)<<b[3&r++],i[r>>2]|=(128|n>>6&63)<<b[3&r++],i[r>>2]|=(128|63&n)<<b[3&r++]);if(t.lastByteIndex=r,r>=o){for(t.start=r-o,t.block=i[s],r=0;r<s;++r)c[r]^=i[r];C(c),t.reset=!0}else t.start=r}if(i[(r=t.lastByteIndex)>>2]|=x[3&r],t.lastByteIndex===o)for(i[0]=i[s],r=1;r<s+1;++r)i[r]=0;for(i[s-1]|=2147483648,r=0;r<s;++r)c[r]^=i[r];C(c);var p,l="",h=0;for(r=0;h<u;){for(r=0;r<s&&h<u;++r,++h)l+=w[(p=c[r])>>4&15]+w[15&p]+w[p>>12&15]+w[p>>8&15]+w[p>>20&15]+w[p>>16&15]+w[p>>28&15]+w[p>>24&15];h%s==0&&(C(c),r=0)}return"0x"+l}(function(t){return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(t<<1)>>5,outputBlocks:t>>5,s:(e=[0,0,0,0,0,0,0,0,0,0],[].concat(e,e,e,e,e))};var e}(t),r)}},T=_(256),E=_(256),B=require("bn.js"),S=function(t){return"string"==typeof t?/^0x/.test(t)?t:"0x"+t:"0x"+new B(t).toString("hex")},A=function(t,e){return parseInt(t.slice(2*e+2,2*e+4),16)},I=function(t){var e;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e=window.crypto.getRandomValues(new Uint8Array(t));else{if("undefined"==typeof require)throw new Error("Safe random numbers not available.");e=require("crypto").randomBytes(t)}for(var r="0x",n=0;n<t;++n)r+=("00"+e[n].toString(16)).slice(-2);return r},P=function(t){return(t.length-2)/2},N=function(t){return"0x"+t.reduce((function(t,e){return t+e.slice(2)}),"")},L=function(t,e,r){return"0x"+r.slice(2*t+2,2*e+2)},q=function(t){for(var e="0x",r=0,n=P(t);r<n;++r)e+=t.slice(2*(n-r),2*(n-r+1));return e},F=function t(e,r){return r.length===2*e+2?r:t(e,"0x0"+r.slice(2))},O=function t(e,r){return r.length===2*e+2?r:t(e,r+"0")},j=function(t){for(var e=[],r=2,n=t.length;r<n;r+=2)e.push(parseInt(t.slice(r,r+2),16));return e},G=function(t){for(var e="0x",r=0,n=t.length;r<n;++r){var a=t[r];e+=(a<16?"0":"")+a.toString(16)}return e},M=function(t){return new Uint8Array(j(t))},W=function(t){return G([].slice.call(t,0))},K=function(t){var e=t.toString(16);return e.length%2==0?"0x"+e:"0x0"+e},R=function(t){return parseInt(t.slice(2),16)},D=function(t,e){return t.concat(e.slice(2))},H=function(t){return"0x0"===t?"0x":t.length%2==0?t:"0x0"+t.slice(2)},U=function(t){return"0"===t[2]?"0x"+t.slice(3):t},$=function(t){for(var e="0x",r=0;r<t.length;++r)e+=("00"+t.charCodeAt(r).toString(16)).slice(-2);return e},J=function(t){for(var e="",r=2;r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.slice(r,r+2),16));return e},V=function(t){for(var e=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},r="0x",n=0;n!==t.length;n++){var a=t.charCodeAt(n);if(a<128)r+=e(a);else{if(a<2048)r+=e(a>>6|192);else{if(a>55295&&a<56320){if(++n===t.length)return null;var i=t.charCodeAt(n);if(i<56320||i>57343)return null;r+=e((a=65536+((1023&a)<<10)+(1023&i))>>18|240),r+=e(a>>12&63|128)}else r+=e(a>>12|224);r+=e(a>>6&63|128)}r+=e(63&a|128)}}return r},X=function(t){for(var e="",r=0,n=P(t);r<n;){var a=A(t,r++);if(a>127){if(a>191&&a<224){if(r>=n)return null;a=(31&a)<<6|63&A(t,r)}else if(a>223&&a<240){if(r+1>=n)return null;a=(15&a)<<12|(63&A(t,r))<<6|63&A(t,++r)}else{if(!(a>239&&a<248))return null;if(r+2>=n)return null;a=(7&a)<<18|(63&A(t,r))<<12|(63&A(t,++r))<<6|63&A(t,++r)}++r}if(a<=65535)e+=String.fromCharCode(a);else{if(!(a<=1114111))return null;a-=65536,e+=String.fromCharCode(a>>10|55296),e+=String.fromCharCode(1023&a|56320)}}return e},Y={random:I,length:P,concat:D,flatten:N,slice:L,reverse:q,pad:F,padRight:O,fromAscii:$,toAscii:J,fromString:V,toString:X,fromNumber:K,toNumber:R,fromNat:H,toNat:U,fromArray:G,toArray:j,fromUint8Array:W,toUint8Array:M},z={__proto__:null,random:I,length:P,concat:D,flatten:N,slice:L,reverse:q,pad:F,padRight:O,fromAscii:$,toAscii:J,fromString:V,toString:X,fromNumber:K,toNumber:R,fromNat:H,toNat:U,fromArray:G,toArray:j,fromUint8Array:W,toUint8Array:M,default:Y},Q=function(t){return(f.isString(t)||f.isNumber(t))&&/^(-)?0x[0-9a-f]*$/i.test(t)},Z=function(t){return"string"==typeof t&&"0x"===t.slice(0,2)},tt=function(t){return Z(t)?t.slice(2):t},et=function(t){if("string"!=typeof t)throw new Error("while padding to even, value must be string, is currently ["+typeof t+"], while padToEven.");return t.length%2?"0"+t:t},rt=function(t){return t instanceof s||t&&t.constructor&&"BN"===t.constructor.name},nt=function(t){var e="";t=(t=(t=(t=(t=u.encode(t)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var r=0;r<t.length;r++){var n=t.charCodeAt(r).toString(16);e+=n.length<2?"0"+n:n}return"0x"+e},at=function(t){if(null==t)return t;if(!isFinite(t)&&!Q(t))throw new Error('Given input "'+t+'" is not a number.');var e=function(t){try{return c(t)}catch(e){throw new Error(e+' Given value: "'+t+'"')}}(t),r=e.toString(16);return e.lt(new s(0))?"-0x"+r.substr(1):"0x"+r},it=function(t,e){if(void 0===e&&(e=!1),ct(t))return e?"address":"0x"+t.toLowerCase().replace(/^0x/i,"");if(f.isBoolean(t))return e?"bool":t?"0x01":"0x00";if(f.isObject(t)&&(!(r=t)||!(r instanceof s||r.constructor&&"BigNumber"===r.constructor.name))&&!rt(t))return e?"string":nt(JSON.stringify(t));var r;if(f.isString(t)){if(0===t.indexOf("-0x")||0===t.indexOf("-0X"))return e?"int256":at(t);if(0===t.indexOf("0x")||0===t.indexOf("0X"))return e?"bytes":t;if(!isFinite(t))return e?"string":nt(t)}return e?t<0?"int256":"uint256":at(t)},ot=new i.ec("secp256k1"),st=function(t){if(void 0===t)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(t))throw new Error('Given address "'+t+'" is not a valid Kardiachain address.');t=t.toLowerCase().replace(/^0x/i,"");for(var e=T(t).replace(/^0x/i,""),r="0x",n=0;n<t.length;n++)r+=parseInt(e[n],16)>7?t[n].toUpperCase():t[n];return r},ut=function(t){try{var e=function(t){rt(t)&&(t=t.toString()),Q(t)&&/^0x/i.test(t.toString())&&(t=function(t){if(t=t.toString(16),!Q(t))throw new Error('Given value "'+t+'" is not a valid hex string.');t=t.replace(/^0x/i,"");for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e}(t));var e=o.keccak256(t);return"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===e?null:e}((t=t.replace(/^0x/i,"")).toLowerCase());if(null===e)return!1;for(var r=e.replace(/^0x/i,""),n=0;n<40;n++)if(parseInt(r[n],16)>7&&t[n].toUpperCase()!==t[n]||parseInt(r[n],16)<=7&&t[n].toLowerCase()!==t[n])return!1;return!0}catch(t){return!1}},ct=function(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(t)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(t))||ut(t))},ft=function(t){var e=Buffer.from(t.slice(2),"hex"),r="0x"+ot.keyFromPrivate(e).getPublic(!1,"hex").slice(2),n=T(r);return{address:st("0x"+n.slice(-40)),privateKey:t}},pt=function(t){for(;t&&t.startsWith("0x0");)t="0x"+t.slice(3);return t},lt=function(t){return t.length%2==1&&(t=t.replace("0x","0x0")),t},ht=function(t){return function(t,e){var r,n,a,i=ot.keyFromPrivate(Buffer.from(e.slice(2),"hex")).sign(Buffer.from(t.slice(2),"hex"),{canonical:!0}),o=0;return i&&(o=i.recoveryParam),r=[(n=Y.fromNumber(27+o),a="0x"+("0x"===n.slice(0,2)?new B(n.slice(2),16):new B(n,10)).toString("hex"),"0x0"===a?"0x":a),Y.pad(32,Y.fromNat("0x"+i.r.toString(16))),Y.pad(32,Y.fromNat("0x"+i.s.toString(16)))],Y.flatten([r[1],r[2],r[0]])}}(),dt=function(){function t(t){this._rpcClient=t.client}var e=t.prototype;return e.getBalance=function(){var t=v(g.mark((function t(e,r){var n;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=[e]).push(r&&r.blockHash?r.blockHash:r&&r.blockHeight?r.blockHeight:"latest"),t.next=4,this._rpcClient.request({method:"account_balance",params:n});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getNonce=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"account_nonce",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t.getWalletFromPK=function(t){var e=r.toBuffer(t);return{address:n.fromPrivateKey(e).getChecksumAddressString(),privateKey:t,balance:0}},t.getWalletFromMnemonic=function(){var t=v(g.mark((function t(e){var r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.ethers.Wallet.fromMnemonic(e.trim()),t.abrupt("return",{address:r.address,privateKey:r.privateKey,balance:0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.isAddress=function(t){return ct(t)},t.generateWallet=function(){var t=a.ethers.Wallet.createRandom();return{address:t.address,privateKey:t.privateKey,mnemonic:t.mnemonic,balance:0}},t.toChecksumAddress=function(t){return st(t)},t}(),vt=new s(0),mt=new s(-1),yt={hydro:"1",oxy:"1000000000",kai:"1000000000000000000"},gt=function(t){var e=t?t.toLowerCase():"kai",r=yt[e];if("string"!=typeof r)throw new Error("The unit provided "+t+" doesn't exists, please use the one of the following units "+JSON.stringify(yt,null,2));return new s(r,10)},wt=function(t,e){try{var r=c(t),n=r.lt(vt),a=gt(e),i=yt[e].length-1||1;n&&(r=r.mul(mt));for(var o=r.mod(a).toString(10);o.length<i;)o="0"+o;var s=r.div(a).toString(10)+("0"===o?"":"."+o);return n&&(s="-"+s),function(t){var e=t.toString().replace(/^[0]+/,"");return e.indexOf(".")>-1&&(e=e.replace(/[0]+$/,"")),0===(e=e.replace(/[.]$/,"")).indexOf(".")&&(e="0"+e),e||0}(s)}catch(r){throw new Error("While converting number "+t+" to "+e+", "+r.message)}},xt=function(t,e){try{var r=function(t){if("string"==typeof t){if(!t.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+t+"', should be a number matching (^-?[0-9.]+).");return t}if("number"==typeof t)return String(t);if("object"==typeof t&&t.toString&&(t.toTwos||t.dividedToIntegerBy))return t.toPrecision?String(t.toPrecision()):t.toString(10);throw new Error("while converting number to string, invalid number value '"+t+"' type "+typeof t+".")}(t),n=gt(e),a=yt[e].length-1||1,i="-"===r.substring(0,1);if(i&&(r=r.substring(1)),"."===r)throw new Error("While converting number "+t+" to hydro, invalid value");var o=r.split(".");if(o.length>2)throw new Error("While converting number "+t+" to hydro,  too many decimal points");var u=o[0],c=o[1];if(u||(u="0"),c||(c="0"),c.length>a)throw new Error("While converting number "+t+" to hydro, too many decimal places");for(;c.length<a;)c+="0";u=new s(u),c=new s(c);var f=u.mul(n).add(c);return i&&(f=f.mul(mt)),f.toString(10)}catch(e){throw new Error("While converting number "+t+" to hydro, "+e.message)}},bt=function(){function t(t){this._rpcClient=t.client}var e=t.prototype;return e.netVersion=function(){var t=v(g.mark((function t(){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"net_version",params:[]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getBlockNumber=function(){var t=v(g.mark((function t(){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_blockNumber",params:[]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.isValidator=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._rpcClient.request({method:"kai_validator",params:[e,!1]});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.getValidators=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this._rpcClient.request({method:"kai_validators",params:[e]});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getBlockByBlockNumber=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0)){t.next=2;break}throw new Error("Invalid block number");case 2:return t.next=4,this._rpcClient.request({method:"kai_getBlockByNumber",params:[e]});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getBlockByHash=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_getBlockByHash",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getBlockHeaderByBlockNumber=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0)){t.next=2;break}throw new Error("Invalid block number");case 2:return t.next=4,this._rpcClient.request({method:"kai_getBlockHeaderByNumber",params:[e]});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getBlockHeaderByHash=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_getBlockHeaderByHash",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.newFilter=function(){var t=v(g.mark((function t(e){var r,n,a,i,o,s;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=void 0===(i=e.topics)?[]:i,s={fromBlock:void 0===(r=e.fromBlock)?"latest":r,toBlock:void 0===(n=e.toBlock)?"latest":n},(a=e.address)&&(s.address=a),o&&o.length>0&&(s.topics=o),t.next=6,this._rpcClient.request({method:"kai_newFilter",params:[s]});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.newBlockFilter=function(){var t=v(g.mark((function t(){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_newBlockFilter",params:[]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.uninstallFilter=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_uninstallFilter",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getFilterChanges=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_getFilterChanges",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getFilterLogs=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_getFilterLogs",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getLogs=function(){var t=v(g.mark((function t(e,r,n,a,i){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_getLogs",params:[{fromBlock:e,toBlock:r,address:n,topics:a,blockhash:i}]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,i){return t.apply(this,arguments)}}(),e.getGasPrice=function(){var t=v(g.mark((function t(){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"kai_gasPrice",params:[]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t.KAIFromHydro=function(t){return wt(t,"kai")},t.HydroFromKAI=function(t){return xt(t,"kai")},t}(),kt=function(t){var e=function(t){return(e=t.toString(16)).length%2==0?e:"0"+e;var e},r=function(t,r){return t<56?e(r+t):e(r+e(t).length/2+55)+e(t)};return"0x"+function t(e){if("string"==typeof e){var n=e.slice(2);return(2!==n.length||n>="80"?r(n.length/2,128):"")+n}var a=e.map(t).join("");return r(a.length/2,192)+a}(t)},Ct=function(t){var e=2,r=function(){if(e>=t.length)throw new Error("");var r=t.slice(e,e+2);return r<"80"?(e+=2,"0x"+r):r<"c0"?a():i()},n=function(){var r=parseInt(t.slice(e,e+=2),16)%64;return r<56?r:parseInt(t.slice(e,e+=2*(r-55)),16)},a=function(){var r=n();return"0x"+t.slice(e,e+=2*r)},i=function(){for(var t=2*n()+e,a=[];e<t;)a.push(r());return a};try{return r()}catch(t){return[]}},_t=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Tt=function(){function t(t){var r=t.client,n=t.provider;if(r)this._rpcClient=r;else{if(!n)throw new Error("Either [client] or [provider] must be provided");var a=new e.HTTPTransport(n,{headers:{"User-Agent":"JS SDK / 0.4.5"}});this._rpcClient=new e.Client(new e.RequestManager([a]))}}var r=t.prototype;return r.getTransaction=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"tx_getTransaction",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getPendingTransaction=function(){var t=v(g.mark((function t(){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"tx_pendingTransactions",params:[]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getTransactionReceipt=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"tx_getTransactionReceipt",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.sendTransactionToExtension=function(){var t=v(g.mark((function t(e,r,n){var a,i,o,s,u,c,f;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r=!1),void 0===n&&(n=0),window.kardiachain&&(window.web3=new p(window.kardiachain),window.kardiachain.isKaiWallet)&&(window.kardiachain.enable(),1)){t.next=4;break}throw new Error("KardiaChain Wallet Extension not found");case 4:return t.next=6,window.web3.eth.getAccounts();case 6:if(a=t.sent,e.gas){t.next=12;break}return t.next=10,this.estimateGas(e,e.data);case 10:e.gas=10*t.sent;case 12:if(e.gasPrice){t.next=17;break}return i=new bt({client:this._rpcClient}),t.next=16,i.getGasPrice();case 16:e.gasPrice=t.sent;case 17:return o=function(){var t={from:a[0],gasPrice:e.gasPrice||1e9,gas:e.gas,to:e.to,value:e.value};return e.data&&(t.data=e.data),new Promise((function(e,r){window.web3.eth.sendTransaction(t,(function(t,n){t?r(t):e(n)}))}))},t.next=20,o();case 20:if(s=t.sent,r){t.next=23;break}return t.abrupt("return",s);case 23:u=n||3e5,c=Date.now()+u;case 25:if(!(Date.now()<c)){t.next=44;break}return t.prev=26,t.next=29,this.getTransactionReceipt(s);case 29:if(!(f=t.sent)){t.next=34;break}return t.abrupt("return",f);case 34:return t.next=36,_t(1e3);case 36:t.next=42;break;case 38:return t.prev=38,t.t0=t.catch(26),t.next=42,_t(1e3);case 42:t.next=25;break;case 44:throw new Error("Timeout: cannot get receipt after 300000ms");case 45:case"end":return t.stop()}}),t,this,[[26,38]])})));return function(e,r,n){return t.apply(this,arguments)}}(),r.signTransaction=function(t,e){var r="0x"+e.replace("0x","");if(!t.gas)throw new Error('"gas" is missing');if(t.nonce<0||t.gas<0||t.gasPrice<0)throw new Error("Gas, gasPrice, nonce is lower than 0");var n,a={nonce:t.nonce,gasPrice:t.gasPrice,gas:t.gas,to:"0x"+t.to.toLowerCase().replace("0x",""),value:t.value,data:"0x"+t.data.toLowerCase().replace("0x","")},i=kt([H(a.nonce),H(a.gasPrice),H(a.gas),a.to.toLowerCase(),H(a.value),a.data]),o=T(i),s=ht(o,r),u=[Y.slice(64,Y.length(n=s),n),Y.slice(0,32,n),Y.slice(32,64,n)],c=Ct(i).concat(u);c[6]=lt(pt(u[0])),c[7]=lt(pt(u[1])),c[8]=lt(pt(u[2]));var f=kt(c),p=Ct(f);return{messageHash:o,v:pt(p[6].toString()),r:pt(p[7].toString()),s:pt(p[8].toString()),rawTransaction:f}},r.generateTransaction=function(t){var e=t.receiver,r=void 0===e?"0x":e,n=t.to,a=t.amount,i=void 0===a?"0x0":a,o=t.value,s=t.nonce,u=void 0===s?"0x0":s,c=t.gasPrice,f=void 0===c?"0xff":c,p=t.gas,l=void 0===p?"0xff":p,h=t.gasLimit,d=t.data,v=void 0===d?"0x":d,m="0xff"===l?void 0===h?"0xff":h:l,y="0x0"===i?void 0===o?"0x0":o:i,g="0x"===r?void 0===n?"0x":n:r;return{nonce:Q(u)?u:it(u),to:g,gasPrice:Q(f)?f:it(f),gas:Q(m)?m:it(m),value:Q(y)?y:it(y),data:"0x"+v.toLowerCase().replace(/^0x/i,"")}},r.sendRawTransaction=function(){var t=v(g.mark((function t(e,r,n){var a,i,o,s;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!1),void 0===n&&(n=0),t.next=4,this._rpcClient.request({method:"tx_sendRawTransaction",params:[e]});case 4:if(a=t.sent,r){t.next=7;break}return t.abrupt("return",a);case 7:i=n||3e5,o=Date.now()+i;case 9:if(!(Date.now()<o)){t.next=28;break}return t.prev=10,t.next=13,this.getTransactionReceipt(a);case 13:if(!(s=t.sent)){t.next=18;break}return t.abrupt("return",s);case 18:return t.next=20,_t(1e3);case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(10),t.next=26,_t(1e3);case 26:t.next=9;break;case 28:throw new Error("Timeout: cannot get receipt after 300000ms");case 29:case"end":return t.stop()}}),t,this,[[10,22]])})));return function(e,r,n){return t.apply(this,arguments)}}(),r.sendTransaction=function(){var t=v(g.mark((function t(e,r,n,a){var i,o,s;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=!1),void 0===a&&(a=0),e.gas){t.next=7;break}return t.next=5,this.estimateGas(e,e.data);case 5:e.gas=10*t.sent;case 7:if(e.gasPrice){t.next=12;break}return i=new bt({client:this._rpcClient}),t.next=11,i.getGasPrice();case 11:e.gasPrice=t.sent;case 12:return o=this.generateTransaction(e),s=this.signTransaction(o,r),t.abrupt("return",this.sendRawTransaction(s.rawTransaction,n,a||3e5));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.estimateGas=function(){var t=v(g.mark((function t(e,r){var n;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={from:e.from||"0x14191195F9BB6e54465a341CeC6cce4491599ccC",to:e.to||"0x",data:r,value:e.value||0,gasPrice:0},t.next=3,this._rpcClient.request({method:"kai_estimateGas",params:[n,"latest"]});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.debugTransaction=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._rpcClient.request({method:"debug_traceTransaction",params:[e]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),Et=function(t,e){var r=t.map((function(t){return t.type})),n=Buffer.from(e.replace("0x",""),"hex"),a=l.rawDecode(r,n).map((function(t,e){return r[e].endsWith("]")?t.map((function(t){return r[e].startsWith("byte")?t.toString("hex"):t.toString()})):r[e].startsWith("byte")?t.toString("hex"):t.toString()}));return It(t,a)},Bt=function(t){var e=typeof t;if("string"===e)return Z(t)?new s(tt(t),16):new s(t,10);if("number"===e)return new s(t);if(t.toArray)return t;throw new Error("Argument is not a number")},St=function(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);if(!e)throw new Error("Invalid [type]");return[parseInt(e[1],10),parseInt(e[2],10)]},At=function t(e,r){var n,a,i,o;if("address"===e)return t("uint160",Bt(r));if("bool"===e)return t("uint8",Boolean(Number(r))?1:0);if("string"===e)return t("bytes",Buffer.from(r,"utf8"));if(jt(e)){if(void 0===r.length)throw new Error("Not an array?");if(!(n=function(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?""===e[2]?"dynamic":parseInt(e[2],10):null}(e)))throw new Error("Invalid [type]");if("dynamic"!==n&&0!==n&&r.length>n)throw new Error("Elements exceed array size: "+n);var u="";for(i in e=e.slice(0,e.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),"dynamic"===n&&(u=t("uint256",r.length)),r)u+=t(e,r[i]).replace("0x","");return u}if("bytes"===e){var c=Y.length(r),f=32*(1+((c-1)/32|0)),p=Mt("uint256",S(c)).data,l=Y.padRight(f,r);return Y.concat(p,l)}if(e.startsWith("bytes")){if((n=Ot(e))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return"0x"+(o=r,function(t,e,r){var n=Buffer.allocUnsafe(32).fill(0);return(t=function(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if("string"==typeof t)t="string"==typeof(e=t)&&e.match(/^0x[0-9A-Fa-f]*$/)?Buffer.from(et(tt(t)),"hex"):Buffer.from(t);else if("number"==typeof t)r=function(t){return"0x"+t.toString(16)}(t),t=Buffer.from(et(r.slice(2)),"hex");else if(null==t)t=Buffer.allocUnsafe(0);else if(s.isBN(t))t=t.toArrayLike(Buffer);else{if(!t.toArray)throw new Error("invalid type");t=Buffer.from(t.toArray())}var e,r;return t}(t)).length<32?(t.copy(n),n):t.slice(0,32)}(o)).toString("hex")}if(e.startsWith("uint")){if((n=Ot(e))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if((a=Bt(r)).bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+a.bitLength());if(a<0)throw new Error("Supplied uint is negative");return"0x"+a.toArrayLike(Buffer,"be",32).toString("hex")}if(e.startsWith("int")){if((n=Ot(e))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if((a=Bt(r)).bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+a.bitLength());return"0x"+a.toTwos(256).toArrayLike(Buffer,"be",32).toString("hex")}if(e.startsWith("ufixed")){if(n=St(e),(a=Bt(r))<0)throw new Error("Supplied ufixed is negative");return t("uint256",a.mul(new s(2).pow(new s(n[1]))))}if(e.startsWith("fixed"))return n=St(e),t("int256",Bt(r).mul(new s(2).pow(new s(n[1]))));throw new Error("Unsupported or invalid type: "+e)},It=function(t,e){return 1===t.length?Pt(t[0].type,e[0]):t.reduce((function(t,r,n){return t[r.name||n.toString()]=Pt(r.type,e[n]),t}),{})},Pt=function t(e,r){if(!r||"0x"===r)return r;if(jt(e)){var n=e.replace(/\[\]/g,"");return(Array.isArray(r)?r:r.split(",")).map((function(e){return t(n,e)}))}return"address"===e?"0x"+r.replace("0x",""):e.startsWith("uint")||e.startsWith("int")?r:"bool"===e?"true"===r:e.startsWith("byte")?"0x"+r.replace("0x",""):r},Nt=function(t,e){if(0===t.length)throw new Error("ABI is require for paser");var r=Lt(t).find((function(t){return t.signature===e.topics[0]}));if(r){for(var n=r.inputs.filter((function(t){return!1===t.indexed})),a=r.inputs.filter((function(t){return!0===t.indexed})),i=[].concat(n,a),o=i.map((function(t){return t.type})),s=Buffer.from(e.data.replace("0x",""),"hex"),u=1;u<e.topics.length;u++){var c=Buffer.from(e.topics[u].replace("0x",""),"hex");s=Buffer.concat([s,c])}var f=l.rawDecode(o,s).map((function(t,e){return o[e].startsWith("byte")?t.toString("hex"):t.toString()})),p=It(i,f);return m({event:m({name:r.name},p)},e)}return e},Lt=function(t){return t.filter((function(t){return"event"===t.type})).map((function(t){return m({signature:qt(t)},t)}))},qt=function(t){var e=t.name+"("+t.inputs.map((function(t){return t.type})).join(",")+")";return E(e)},Ft=function(t){return t.map((function(t){return Q(t)?t:it(t)}))},Ot=function(t){var e=/^\D+(\d+)$/.exec(t);if(!e)throw new Error("Invalid type");return parseInt(e[1],10)},jt=function(t){return t.lastIndexOf("]")===t.length-1},Gt=function(t){return"bytes"===t||"string"===t||!!jt(t)},Mt=function(t,e){return"uint256"===t||"bytes32"===t||"address"===t?{data:Y.pad(32,e),dynamic:!1}:{data:At(t,e),dynamic:Gt(t)}},Wt=function(t,e,r){return void 0===e&&(e="function"),void 0===r&&(r=""),t.find("constructor"!==e?function(t){return t.type===e&&t.name===r}:function(t){return t.type===e})},Kt=function(){function t(t){var r=t.client,n=t.bytecodes,a=t.abi,i=t.provider;if(r)this._rpcClient=r;else{if(!i)throw new Error("Either [client] or [provider] must be provided");var o=new e.HTTPTransport(i,{headers:{"User-Agent":"JS SDK / 0.4.5"}});this._rpcClient=new e.Client(new e.RequestManager([o]))}if(this.txModule=new Tt({client:this._rpcClient}),this.bytecodes=n||"",a&&!Array.isArray(a))throw new Error("Invalid [abi]");this.abi=a||[]}var r=t.prototype;return r.updateAbi=function(t){this.abi=t},r.updateByteCode=function(t){this.bytecodes=t},r.info=function(){return{byteCode:this.bytecodes,abi:this.abi}},r.deploy=function(t){var e,r,n=this,a=t.params,i=this.bytecodes,o=Wt(this.abi,"constructor"),s=function(t,e,r){var n="0x",a="0x";if(r&&e)for(var i=r.map((function(t,r){return Mt(e.inputs[r].type,t)})),o=0;o<i.length;++o)if(i[o].dynamic){var s=32*i.length+Y.length(a);n=Y.concat(n,Y.pad(32,S(s))),a=Y.concat(a,i[o].data)}else n=Y.concat(n,i[o].data);return Y.flatten([t,n,a])}("0x"+i.replace("0x",""),o,a.map((function(t){return Array.isArray(t)?Ft(t):Q(t)?t:it(t)})));return{txData:function(){return s},getDefaultTxPayload:function(){return{amount:0,data:s,gasPrice:1e9,gas:9e5}},estimateGas:(r=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,n.txModule.estimateGas(e,s);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)}),send:(e=v(g.mark((function t(e,r,a){var i,o,u,c;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),void 0===a&&(a=!1),i=ft(e),o=new dt({client:n._rpcClient}),t.next=6,o.getNonce(i.address);case 6:return u=t.sent,c=new Tt({client:n._rpcClient}),t.next=10,c.sendTransaction({receiver:"0x",amount:r.amount||0,nonce:r.nonce||u,gasPrice:r.gasPrice||1e9,gas:r.gas||9e5,data:s},e,a);case 10:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),function(t,r,n){return e.apply(this,arguments)})}},r.invokeContract=function(t,e){var r,n,a,i,o=this,s=Wt(this.abi,"function",t),u=e.map((function(t){return Array.isArray(t)?Ft(t):Q(t)?t:it(t)})),c=function(t,e){for(var r=t.name+"("+t.inputs.map((function(t){return t.type})).join(",")+")",n=E(r).slice(0,10),a=e.map((function(e,r){return Mt(t.inputs[r].type,e)})),i="0x",o="0x",s=0;s<a.length;++s)if(a[s].dynamic){var u=32*a.length+Y.length(o);i=Y.concat(i,Y.pad(32,S(u))),o=Y.concat(o,a[s].data)}else i=Y.concat(i,a[s].data);return Y.flatten([n,i,o])}(s,u);return{txData:function(){return c},getDefaultTxPayload:function(){return{amount:0,gasPrice:1e9,data:c}},estimateGas:(i=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.txModule.estimateGas(e,c);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),getTxObject:(a=v(g.mark((function t(){var e;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={amount:0,gasPrice:1e9,data:c},t.next=3,o.txModule.estimateGas(e,c);case 3:return e.gas=t.sent,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)}),send:(n=v(g.mark((function t(e,r,n,a){var i,s,u,f,p,l,h;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=!1),i=ft(e),s=new dt({client:o._rpcClient}),t.next=6,s.getNonce(i.address);case 6:return u=t.sent,f=new Tt({client:o._rpcClient}),t.next=10,f.sendTransaction({receiver:r,amount:n.amount||0,nonce:n.nonce||u,gasPrice:n.gasPrice||1e9,gas:n.gas||9e5,data:c},e,a);case 10:if(p=t.sent,a){t.next=13;break}return t.abrupt("return",p);case 13:return l=p.logs?p.logs.map((function(t){return Nt(o.abi,t)})):[],h=m({events:l},p),t.abrupt("return",h);case 16:case"end":return t.stop()}}),t)}))),function(t,e,r,a){return n.apply(this,arguments)}),call:(r=v(g.mark((function t(e,r,n){var a;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),void 0===n&&(n="latest"),a={from:r.from||"0x",to:e,data:c,value:r.amount||0,gasPrice:r.gasPrice||1e9,gas:r.gas||9e5},t.next=5,o._rpcClient.request({method:"kai_kardiaCall",params:[a,n]});case 5:return t.abrupt("return",Et(s.outputs,t.sent));case 7:case"end":return t.stop()}}),t)}))),function(t,e,n){return r.apply(this,arguments)})}},r.parseEvent=function(){var t=v(g.mark((function t(e){var r,n,a=this;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Tt({client:this._rpcClient}),t.next=3,r.getTransactionReceipt(e);case 3:return t.abrupt("return",(n=t.sent).logs?n.logs.map((function(t){return Nt(a.abi,t)})):[]);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),Rt=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Dt=function(){function t(t){var r=t.client,n=t.address,a=t.name,i=t.decimals,o=t.symbol,s=t.provider,u=t.abi;if(this.address="",this.name="",this.decimals=18,this.symbol="",this.abi=Rt,r)this._rpcClient=r;else{if(!s)throw new Error("Either [client] or [provider] must be provided");var c=new e.HTTPTransport(s,{headers:{"User-Agent":"JS SDK / 0.4.5"}});this._rpcClient=new e.Client(new e.RequestManager([c]))}if(this._smcInstance=new Kt({client:this._rpcClient}),this._smcInstance.updateAbi(Rt),n){if(!ut(n))throw new Error("Invalid [address]");this.address=n}a&&(this.name=a),o&&(this.symbol=o),i&&(this.decimals=i),u&&(this.abi=u)}var r=t.prototype;return r.setCustomABI=function(t){this.abi=t},r.validateAddress=function(){if(!ut(this.address))throw new Error("Invalid [address]")},r.getContractInstance=function(){return this._smcInstance},r.getName=function(){var t=v(g.mark((function t(e){var r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",this.name);case 2:return this.validateAddress(),t.next=5,this._smcInstance.invokeContract("name",[]).call(this.address);case 5:return(r=t.sent)&&(this.name=r),t.abrupt("return",this.name);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDecimals=function(){var t=v(g.mark((function t(e){var r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",this.decimals);case 2:return this.validateAddress(),t.next=5,this._smcInstance.invokeContract("decimals",[]).call(this.address);case 5:return void 0!==(r=t.sent)&&(this.decimals=r),t.abrupt("return",Number(this.decimals));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getSymbol=function(){var t=v(g.mark((function t(e){var r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",this.symbol);case 2:return this.validateAddress(),t.next=5,this._smcInstance.invokeContract("symbol",[]).call(this.address);case 5:return(r=t.sent)&&(this.symbol=r),t.abrupt("return",this.symbol);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getTotalSupply=function(){var t=v(g.mark((function t(e){var r;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e="string"),this.validateAddress(),t.next=4,this._smcInstance.invokeContract("totalSupply",[]).call(this.address);case 4:if(r=t.sent,"BigNumber"!==e){t.next=7;break}return t.abrupt("return",new h.BigNumber(r));case 7:if("string"!==e){t.next=9;break}return t.abrupt("return",new h.BigNumber(r).toFixed());case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getFromAddress=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ut(e)){t.next=2;break}throw new Error("Invalid [address]");case 2:return this.address=e,t.next=5,this.getName(!0);case 5:return t.next=7,this.getDecimals(!0);case 7:return t.next=9,this.getSymbol(!0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=v(g.mark((function t(e){return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ut(e)){t.next=2;break}throw new Error("Invalid [address]");case 2:return t.next=4,this._smcInstance.invokeContract("balanceOf",[e]).call(this.address);case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferRaw=function(){var t=v(g.mark((function t(e,r,n,a,i){var o,s;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a&&(a={}),void 0===i&&(i=!1),this.validateAddress(),ut(r)){t.next=5;break}throw new Error("Invalid [to]");case 5:if(n){t.next=7;break}throw new Error("Invalid [amount]");case 7:if(o=this._smcInstance.invokeContract("transfer",[r,n]),a.gas){t.next=14;break}return s=o.getDefaultTxPayload(),t.next=12,o.estimateGas(s);case 12:a.gas=2*t.sent;case 14:return t.abrupt("return",o.send(e,this.address,a,i));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,i){return t.apply(this,arguments)}}(),r.transfer=function(){var t=v(g.mark((function t(e,r,n,a,i){var o,s,u,c;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===a&&(a={}),void 0===i&&(i=!1),this.validateAddress(),ut(r)){t.next=5;break}throw new Error("Invalid [to]");case 5:if(!(o=new h.BigNumber(n)).isLessThan(new h.BigNumber(0))){t.next=8;break}throw new Error("Invalid [amount]");case 8:if(s=new h.BigNumber(Math.pow(10,this.decimals)),u=this._smcInstance.invokeContract("transfer",[r,o.multipliedBy(s).toFixed(0,1)]),a.gas){t.next=16;break}return c=u.getDefaultTxPayload(),t.next=14,u.estimateGas(c);case 14:a.gas=2*t.sent;case 16:return t.abrupt("return",u.send(e,this.address,a,i));case 17:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,i){return t.apply(this,arguments)}}(),r.estimateGas=function(){var t=v(g.mark((function t(e,r){var n,a,i,o;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new h.BigNumber(r),a=new h.BigNumber(Math.pow(10,this.decimals)),i=this._smcInstance.invokeContract("transfer",[e,n.multipliedBy(a).toFixed(0,1)]),o=i.getDefaultTxPayload(),t.next=6,i.estimateGas(o);case 6:return t.abrupt("return",2*t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),t}(),Ht={fromHydro:wt,toHydro:xt,toChecksum:st,checkAddressChecksum:ut,isAddress:ct,fromPrivate:ft,bytes:z};exports.KAIChain=bt,exports.KRC20=Dt,exports.KardiaAccount=dt,exports.KardiaContract=Kt,exports.KardiaTransaction=Tt,exports.KardiaUtils=Ht,exports.default=function(t){var r=new e.HTTPTransport(t.endpoint,{headers:{"User-Agent":"JS SDK / 0.4.5"}});this._rpcClient=new e.Client(new e.RequestManager([r])),this.account=new dt({client:this._rpcClient}),this.transaction=new Tt({client:this._rpcClient}),this.kaiChain=new bt({client:this._rpcClient}),this.contract=new Kt({client:this._rpcClient}),this.krc20=new Dt({client:this._rpcClient})};
//# sourceMappingURL=kardia-js-sdk.cjs.production.min.js.map
